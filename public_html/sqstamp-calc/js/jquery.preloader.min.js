(function(g,k,l,e){var j="preloader",f={text:"",percent:"",duration:"",zIndex:"",setRelative:false},h,c,n,a,b='<span class="preloader-text"></span>',o='<span class="preloader-percent"></span>',i=false;function m(q,p){this.element=q;this.options=g.extend({},f,p);this._defaults=f;this._name=j;this.init()}var d={remove:function(){if(h){i=false;h.remove()}},update:function(p){var q=p[1];if(q.percent.length>0&&a){a.text(q.percent+"%")}else{if(!a){console.warn("Значение не может быть обновлено");return false}}if(q.text.length>0&&n){n.text(q.text)}else{if(!n){console.warn("Значение не может быть обновлено");return false}}}};m.prototype.init=function(){var q=g(this.element),v,t,p,r,s,w;if(i){console.warn("Plugin "+j+" is already initialized");return false}q.prepend('<div class="preloader"><div class="preloader-container"><div class="preloader-animation"></div></div></div>');h=q.find(".preloader");$preloaderContainer=q.find(".preloader-container");c=h.find(".preloader-animation");r=q.height();s=q[0].scrollHeight;w=h.height();if(s>w){h.height(s);q.on("scroll",u).trigger("scroll");function u(){var y=q.scrollTop(),x,z=$preloaderContainer.height();x=Math.round(r/2-z/2+y)+"px";$preloaderContainer.css({top:x})}}if(this.options.text.length>0){$preloaderContainer.prepend(b);n=q.find(".preloader-text");n.text(this.options.text)}if(this.options.percent.length>0){p=this.options.percent;if(p<0){p=0}else{if(p>100){p=100}}$preloaderContainer.prepend(o);a=q.find(".preloader-percent");a.text(p+"%")}if(this.options.duration.length>0){setTimeout(function(){h.remove()},this.options.duration)}if(this.options.zIndex.length>0){h.css("z-index",this.options.zIndex)}if(this.options.setRelative==true){q.css("position","relative")}i=true};g.fn[j]=function(s,r){var p=arguments[0],q=Array.prototype.slice.call(arguments);if(d[p]){return this.each(function(){d[p].call(this,q)})}else{if(typeof(p)==="object"||!p){return this.each(function(){if(!g.data(this,"plugin_"+j)){g.data(this,"plugin_"+j)}new m(this,p)})}else{g.error("Method "+p+" does not exist on jQuery."+j)}}}})(jQuery,window,document);